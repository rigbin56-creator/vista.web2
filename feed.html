<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Feed | Rigbin & Candy</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <main class="container">
        <div class="compose-box">
            <div style="margin-bottom: 10px;">
                <label style="font-size: 0.8rem; color: var(--text-dim);">Publicando como:</label>
                <select id="authorSelect" style="background:transparent; color:white; border:none; font-weight:bold;">
                    </select>
            </div>

            <textarea id="postContent" placeholder="Â¿QuÃ© quieres guardar hoy?"></textarea>
            <input type="text" id="mediaUrl" placeholder="Pegar URL de imagen o video (opcional)"
                   style="width:100%; background:rgba(0,0,0,0.2); border:none; color:white; padding:8px; margin-top:10px; border-radius:6px;">

            <div style="margin-top: 10px; text-align: right;">
                <button class="btn btn-primary" onclick="publishPost()">Publicar</button>
            </div>
        </div>

        <div id="feedList"></div>
    </main>

    <body>
        <header class="app-header">
            <div class="header-left">
                <span id="themeToggle" class="icon-btn">ðŸŒ™</span>
            </div>
            <nav class="header-nav">
                <a href="index.html" class="nav-item">Home</a>
                <a href="feed.html" class="nav-item active">Feed</a>
                <a href="gallery.html" class="nav-item">GalerÃ­a</a>
            </nav>
            <div class="header-right">
                <img id="currentUserAvatar" src="" class="mini-avatar" onclick="UserSystem.login(UserSystem.getCurrentUser().id === 'rigbin' ? 'candy' : 'rigbin')">
            </div>
        </header>

        <main id="feedList" class="feed-container"></main>

        <button id="fabBtn" class="fab">
            <span>+</span>
        </button>

        <div id="createPostPanel" class="create-panel">
            <div class="panel-header">
                <h3>Nuevo Recuerdo</h3>
                <button id="closePanelBtn">âœ•</button>
            </div>
            <div class="panel-body">
                <textarea id="postContent" placeholder="Â¿QuÃ© estÃ¡s pensando?"></textarea>
                <input type="text" id="mediaUrl" placeholder="Link de imagen, video o YouTube...">
                <button id="publishBtn" class="btn-primary">Publicar</button>
            </div>
        </div>

        <div id="mediaModal" class="media-modal">
            <button class="modal-close">âœ•</button>
            <div class="modal-content">
                <div id="modalMediaContainer"></div>
                <div class="modal-info">
                    <div class="modal-meta">
                        <img id="modalAvatar" src="" class="mini-avatar">
                        <span id="modalAuthor"></span>
                        <span id="modalDate" class="date-dim"></span>
                    </div>
                    <p id="modalText"></p>
                </div>
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
        <script src="js/config.js"></script>
        <script src="js/feed.js"></script>
    </body>
</html>
